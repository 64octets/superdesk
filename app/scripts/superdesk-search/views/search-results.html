<div class="preview-layout" ng-class="{closed: !selected.preview}">
    <div class="list-pane {{ view || 'mgrid' }}-view">
        <header>
            <div class="pull-left fitler-trigger" ng-click="flags.facets = true" ng-class="{hidden: flags.facets}"><i class="icon-filter-large"></i></div>

            <div sd-item-searchbar data-repo="repo" data-context="context" class="pull-left"></div>
            <div sd-item-sortbar class="pull-left"></div>

            <div class="view-select pull-right">
                <button title="{{ 'switch to grid view' | translate}}" ng-show="view !== 'mgrid'"><i class="icon-th" ng-click="setview('mgrid')"></i></button>
                <button title="{{ 'switch to list view' | translate}}" ng-show="view !== 'compact'"><i class="icon-th-list" ng-click="setview('compact')"></i></button>
            </div>
            <div sd-pagination data-items="items" data-limit="25"></div>
        </header>
        <div class="content">
            <div class="loading-indicator" ng-show="loading">{{:: 'loading' | translate }}</div>
            <div sd-shadow>
                <div
                    sd-list-view
                    data-items="items._items"
                    data-select="preview(item)"
                    data-extras="{view: view, activity: {type: spike ? 'spike' : type, action: 'list'}, api: api}">
                    <div sd-media-box 
                        data-item="item" 
                        class="{{view}}-view" 
                        data-cursor="view !== 'mgrid'">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="preview-pane content-item-preview" ng-init="contenttab = true">
        <header>
            <ul class="nav nav-tabs">
                <li ng-class="{active: contenttab}">
                    <button ng-click="contenttab = true"><span translate>content</span></button>
                </li>
                <li ng-class="{active: !contenttab}">
                    <button ng-click="contenttab = false"><span translate>metadata</span></button>
                </li>
            </ul>
            <button ng-click="preview(null)" class="close-preview">
                <i class="icon-close-small"></i>
            </button>
        </header>
        <div class="content" ng-if="selected.preview">
            <div ng-if="contenttab" sd-media-preview data-item="selected.preview" data-display="openlightbox()" data-type="{{ spike ? 'spike' : type }}"></div>
            <div ng-if="!contenttab" sd-media-metadata data-item="selected.preview"></div>
        </div>
    </div>
</div>
