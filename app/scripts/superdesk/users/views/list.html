<div class="subnav subnav-fixed">
    <input type="text" name="searchbar" class="searchbar-container" placeholder="{{ 'Search'|translate }}" ng-model="search" ng-change="locationParams.set('search', search)" sd-debounce sd-auto-focus>
    <a class="btn btn-medium btn-info pull-right" href="#/users/new" sd-with-params><span class="medium-icon-add"></span> {{ 'Add new user'|translate }}</a>
</div>

<div sd-upload-popup></div>

<div class="tab-background-container" style="top: 50px;">
    <div class="tab-content user-tabs">
        <div class="tab-pane active" id="active_users">
            <div class="tab-submenu"><i ng-show="users._items|any:'_checked'"></i>
                <div class="page-info pull-left" ng-show="users._items|any:'_checked'">
                    {{ 'With selected'|translate }}: 
                    <button class="btn" ng-click="deleteChecked();"><i class="icon-trash"></i> {{ 'Delete'|translate }}</button>
                </div>
                <div sd-pagination data-model="users"></div>
                <!--<div class="page-info pull-right"></div>-->
            </div>

            <div class="tab-table">
                <table class="sf_table user-table">
                    <thead>
                        <tr>
                            <th class="chckbx_col"><input sd-check-all ng-model="users._items"></th>
                            <th class="avatar_col" ng-show="settings.fields.avatar"></th>
                            <th class="name_col" ng-show="settings.fields.display_name">
                                <a href=""
                                    sd-sort
                                    data-label="{{ 'Name'|translate }}"
                                    data-field="display_name"
                                ></a>
                            </th>
                            <th class="username_col" ng-show="settings.fields.username">
                                <a href=""
                                    sd-sort
                                    data-label="{{ 'Username'|translate }}"
                                    data-field="username"
                                ></a>
                            </th>
                            <th class="email_col resp-hide" ng-show="settings.fields.email">
                                <a href=""
                                    sd-sort
                                    data-label="{{ 'Email'|translate }}"
                                    data-field="email"
                                ></a>
                            </th>
                            <th class="small_col resp-hide" ng-show="settings.fields.created">
                                <a href=""
                                    sd-sort
                                    data-label="{{ 'Created'|translate }}"
                                    data-field="created"
                                ></a>
                            </th>
                            <th class="action_col">
                                <div class="dropdown" style="text-align:right;" >
                                    <a class="dropdown-toggle" data-toggle="dropdown" href="#"><i class="icon-switches"></i> <span class="caret"></span></a>
                                    <ul class="dropdown-menu sf-dropdown-simple pull-right">
                                        <li><input sd-check ng-click="settings.save()" ng-model="settings.fields.avatar"> Avatar</li>
                                        <li><input sd-check ng-click="settings.save()" ng-model="settings.fields.display_name"> Name</li>
                                        <li><input sd-check ng-click="settings.save()" ng-model="settings.fields.username"> Username</li>
                                        <li><input sd-check ng-click="settings.save()" ng-model="settings.fields.email"> Email</li>
                                        <li><input sd-check ng-click="settings.save()" ng-model="settings.fields.created"> Member Since</li>
                                    </ul>
                                </div>
                            </th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr ng-repeat="user in users._items" ng-click="edit(user)">
                            <td><input sd-check ng-model="user._checked"></td>
                            <td><figure class="avatar" ng-show="settings.fields.avatar"><img sd-user-picture data-src="user.picture_url" width="22" height="22"></figure></td>
                            <td class="name_col" ng-show="settings.fields.display_name"><a href="#/users/{{ user._id }}" sd-with-params>{{ user.display_name }}</a></td>
                            <td ng-show="settings.fields.username">{{ user.username }}</td>
                            <td class="email_col resp-hide" ng-show="settings.fields.email"><a href="">{{ user.email }}</a></td>
                            <td class="resp-hide" ng-show="settings.fields.created">{{ user.created | reldate}}</td>
                            <td class="action_col">
                                <div class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"><b class="caret"></b></a>
                                    <ul class="dropdown-menu sf-dropdown-simple pull-right">
                                        <li><a href="#"><i class="icon-eye-open"></i> {{ 'View details'|translate }}</a></li>
                                        <li><a href="#"><i class="icon-pencil"></i> {{ 'Edit details'|translate }}</a></li>
                                        <li><a href="#"><i class="icon-ban-circle"></i> {{ 'Permissions'|translate }}</a></li>
                                        <li><a href="" ng-click="delete(user)"><i class="icon-trash"></i> {{ 'Delete'|translate }}</a></li>
                                    </ul>
                                </div>
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <!-- detail.html -->
    <div class="user-details-pane open" style="top: 50px" ng-if="user" ng-controller="UserDetailController">

        <a href="#/users/" class="close" sd-with-params><i class="icon-remove"></i></a>
        <div class="user-details-header"></div>

        <div class="user-details-content tab-content">
            
        <div class="tab-pane user-profile user-profile-edit clearfix active" id="userd-profile-edit">
                  <header>
                        <figure class="small-user-avatar">
                            <a href="" ng-click="editPicture()" translate>Change Photo</a>
                            <img sd-user-picture data-src="user.picture_url">
                        </figure>
                        <button class="btn btn-info pull-right" ng-click="save()">{{ 'Save'|translate }}</button>
                  </header>
                  <div class="details-info">
                      <div class="details-section">
                        <div class="details-section-header">{{'General'|translate}}</div>
                        <div class="info-item"> 
                          <span class="info-label">{{'User Name'|translate}}</span>
                          <span class="info-value info-editable"><input ng-model="user.username"></span>
                        </div>
                        <div class="info-item">
                          <span class="info-label">{{'First Name'|translate}}</span>
                          <span class="info-value info-editable"><input ng-model="user.first_name"></span>
                        </div>
                        <div class="info-item">
                          <span class="info-label">{{'Last Name'|translate}}</span>
                          <span class="info-value info-editable"><input ng-model="user.last_name"></span>
                        </div>
                        <div class="info-item" ng-if="!user._id">
                          <span class="info-label">{{'Password'|translate}}</span>
                          <span class="info-value info-editable"><input type="password" ng-model="user.password"></span>
                        </div>
                      </div>
                      <div class="details-section">
                        <div class="details-section-header">
                          {{ 'Contact Information'|translate }}
                        </div>
                        <div class="info-item">
                          <span class="info-label">{{'Email'|translate}}</span>
                          <span class="info-value info-editable"><input ng-model="user.email"></span>
                        </div>
                      </div>
                  </div>

                </div>
        </div>

        </div>
    <!-- /detail.html -->

</div>